<!--<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Underline Animation</title>
  <style>
    .underline-middle {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }

    .underline-middle::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 50%;
      width: 0%;
      transform: translateX(-50%);
      border-bottom: 2px solid black;
      transition: width 0.4s ease;
    }

    .underline-middle:hover::after {
      width: 100%;
    }
  </style>
</head>
<body>
  <h1 class="underline-middle">제목</h1>
</body>
</html>-->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ICECON 필터 슬라이드</title>
  <style>
    .ICECON_movie_grid_main {
      position: relative;
      width: 720px;
      margin: 30px auto;
      overflow: hidden;
    }
    .movie_slider {
      display: flex;
      transition: transform 0.5s ease;
      will-change: transform;
    }
    .movie_card {
      flex: 0 0 200px;
      margin-right: 20px;
      background: #eee;
      border-radius: 10px;
      padding: 10px;
      box-sizing: border-box;
      text-align: center;
    }
    .movie_card img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      border-radius: 10px;
    }
    .movie_grid_next, .movie_grid_prev {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0,0,0,0.4);
      color: white;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      line-height: 30px;
      text-align: center;
      font-size: 18px;
      cursor: pointer;
      user-select: none;
      z-index: 10;
    }
    .movie_grid_next {
      right: 10px;
    }
    .movie_grid_prev {
      left: 10px;
    }
  </style>
</head>
<body>

<div class="ICECON_movie_grid_main">
  <div class="ICECON_movie_grid_prev">&#10094;</div>
  <div class="ICECON_movie_slider"></div>
  <div class="ICECON_movie_grid_next">&#10095;</div>
</div>


<div class="tagembed-widget" style="width:700px;height:100%;overflow:auto;" data-widget-id="295613" website="1"></div><script src="https://widget.tagembed.com/embed.min.js" type="text/javascript"></script>

<script>
  // 원본 movie_list 데이터 예시
    const movie_list = [
    {
      "type": "ad",
      "title": "CGV 관람권 쿠폰 받자!",
      "subTitle": "결제내역 확인하고",
      "description": "CGV 관람권 받기",
      "buttonText": "자세히 보기",
      "image": "main_ad.webp"
    },
    {
      "type": "movie",
      "rank": 1,
      "title": "극장판 귀멸의 칼날: 무한성편",
      "grade": "15",
      "reservationRate": "29.2%",
      "releaseDate": "2025.08.22",
      "buttonText": "예매하기",
      "image": "귀멸의 칼날.jpg"
    },
    {
      "type": "movie",
      "rank": 2,
      "title": "좀비딸",
      "grade": "12",
      "score": "92%",
      "reservationRate": "18.9%",
      "totalAudience": "222.3만",
      "buttonText": "예매하기",
      "image": "좀비딸.jpg"
    },
    {
      "type": "ad",
      "title": "죽은 자를 부르는 강령숲",
      "subTitle": "울여름 함께하지 않을래?",
      "releaseDate": "2025.08.06",
      "buttonText": "자세히 보기",
      "image": "강령.webp"
    },
    {
      "type": "movie",
      "rank": 3,
      "title": "F1 더 무비",
      "grade": "12",
      "score": "99%",
      "reservationRate": "11.6%",
      "totalAudience": "322만",
      "buttonText": "예매하기",
      "image": "F1.jpg"
    },
    {
      "type": "concert",
      "title": "요루시카 라이브 2024 [전생]",
      "ICECON": true,
      "grade": "전체관람가",
      "date": "2025.09.10",
      "venue": "올림픽 체조경기장",
      "buttonText": "예매하기",
      "image": "요루시카.jpg"
    },
    {
    "type": "concert",
    "title": "[씨네뮤지엄] 오르세 미술관",
    "ICECON": true,
    "grade": "전체관람가",
    "date": "2025.09.01",
    "venue": "CGV 아트하우스",
    "buttonText": "상세보기",
    "image": "오르세.jpg"
  },
  {
    "type": "concert",
    "title": "[씨네뮤지엄] 나는 이렇게 기억되고 싶다, 렘브란트",
    "ICECON": true,
    "grade": "15",
    "date": "2025.09.01",
    "venue": "CGV ICECON관",
    "buttonText": "상세보기",
    "image": "렘브란트.jpg"
  },
  {
    "type": "concert",
    "title": "뮤지컬 라파치니의 정원",
    "ICECON": true,
    "grade": "12",
    "date": "2025.09.01",
    "venue": "CGV 뮤지컬관",
    "buttonText": "상세보기",
    "image": "라파치니.jpg"
  }
  ];

  // ICECON:true인 영화만 필터링
  const iceconMovies = movie_list.filter(movie => movie.ICECON);

  const slider = document.querySelector('.ICECON_movie_slider');
  const prevBtn = document.querySelector('.ICECON_movie_grid_prev');
  const nextBtn = document.querySelector('.ICECON_movie_grid_next');

  // 카드 하나당 너비 + margin-right 20px 포함
  const cardWidth = 220; 

  let currentIndex = 0;

  // 슬라이드 카드 생성
  function renderCards() {
    slider.innerHTML = iceconMovies.map(movie => `
      <div class="ICECON_movie_card">
        <img src="${movie.POSTER_URL}" alt="${movie.TITLE} 포스터" />
        <p><strong>${movie.TITLE}</strong></p>
        <p>상영시간: ${movie.RUNTIME}분</p>
        <p>장르: ${movie.GENRE_NM}</p>
        <p>관람등급: ${movie.REP_RATING_NM}</p>
        <button>예매하기</button>
      </div>
    `).join('');
  }

  // 슬라이드 이동 함수
  function ICECON_updateSlide() {
    // 최대 슬라이드 인덱스 (슬라이드 가능 개수)
    const maxIndex = iceconMovies.length - 3;
    if (currentIndex < 0) currentIndex = 0;
    if (currentIndex > maxIndex) currentIndex = maxIndex;
    slider.style.transform = `translateX(${-cardWidth * currentIndex}px)`;
  }

  // 이벤트 연결
  prevBtn.addEventListener('click', () => {
    currentIndex--;
    ICECON_updateSlide();
  });

  nextBtn.addEventListener('click', () => {
    currentIndex++;
    ICECON_updateSlide();
  });

  // 초기 렌더링
  renderCards();
  updateSlide();

</script>

</body>
</html>
